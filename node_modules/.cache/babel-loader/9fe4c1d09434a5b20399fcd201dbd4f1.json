{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst quote_1 = require(\"./quote\");\n\nconst function_1 = require(\"./function\");\n\nconst array_1 = require(\"./array\");\n/**\n * Transform an object into a string.\n */\n\n\nexports.objectToString = (value, space, next, key) => {\n  if (typeof Buffer === \"function\" && Buffer.isBuffer(value)) {\n    return `new Buffer(${next(value.toString())})`;\n  } // Use the internal object string to select stringify method.\n\n\n  const toString = OBJECT_TYPES[Object.prototype.toString.call(value)];\n  return toString ? toString(value, space, next, key) : undefined;\n};\n/**\n * Stringify an object of keys and values.\n */\n\n\nconst rawObjectToString = (obj, indent, next) => {\n  const eol = indent ? \"\\n\" : \"\";\n  const space = indent ? \" \" : \"\"; // Iterate over object keys and concat string together.\n\n  const values = Object.keys(obj).reduce(function (values, key) {\n    const fn = obj[key];\n    const result = next(fn, key); // Omit `undefined` object entries.\n\n    if (result === undefined) return values; // String format the value data.\n\n    const value = result.split(\"\\n\").join(`\\n${indent}`); // Skip `key` prefix for function parser.\n\n    if (function_1.USED_METHOD_KEY.has(fn)) {\n      values.push(`${indent}${value}`);\n      return values;\n    }\n\n    values.push(`${indent}${quote_1.quoteKey(key, next)}:${space}${value}`);\n    return values;\n  }, []).join(`,${eol}`); // Avoid new lines in an empty object.\n\n  if (values === \"\") return \"{}\";\n  return `{${eol}${values}${eol}}`;\n};\n/**\n * Stringify global variable access.\n */\n\n\nconst globalToString = (value, space, next) => {\n  return `Function(${next(\"return this\")})()`;\n};\n/**\n * Convert JavaScript objects into strings.\n */\n\n\nconst OBJECT_TYPES = {\n  \"[object Array]\": array_1.arrayToString,\n  \"[object Object]\": rawObjectToString,\n  \"[object Error]\": (error, space, next) => {\n    return `new Error(${next(error.message)})`;\n  },\n  \"[object Date]\": date => {\n    return `new Date(${date.getTime()})`;\n  },\n  \"[object String]\": (str, space, next) => {\n    return `new String(${next(str.toString())})`;\n  },\n  \"[object Number]\": num => {\n    return `new Number(${num})`;\n  },\n  \"[object Boolean]\": bool => {\n    return `new Boolean(${bool})`;\n  },\n  \"[object Set]\": (set, space, next) => {\n    return `new Set(${next(Array.from(set))})`;\n  },\n  \"[object Map]\": (map, space, next) => {\n    return `new Map(${next(Array.from(map))})`;\n  },\n  \"[object RegExp]\": String,\n  \"[object global]\": globalToString,\n  \"[object Window]\": globalToString\n};","map":{"version":3,"sources":["../src/object.ts"],"names":[],"mappings":"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","sourcesContent":["import { Next, ToString } from \"./types\";\nimport { quoteKey } from \"./quote\";\nimport { USED_METHOD_KEY } from \"./function\";\nimport { arrayToString } from \"./array\";\n\n/**\n * Transform an object into a string.\n */\nexport const objectToString: ToString = (value, space, next, key) => {\n  if (typeof (Buffer as unknown) === \"function\" && Buffer.isBuffer(value)) {\n    return `new Buffer(${next(value.toString())})`;\n  }\n\n  // Use the internal object string to select stringify method.\n  const toString = OBJECT_TYPES[Object.prototype.toString.call(value)];\n  return toString ? toString(value, space, next, key) : undefined;\n};\n\n/**\n * Stringify an object of keys and values.\n */\nconst rawObjectToString: ToString = (obj, indent, next) => {\n  const eol = indent ? \"\\n\" : \"\";\n  const space = indent ? \" \" : \"\";\n\n  // Iterate over object keys and concat string together.\n  const values = Object.keys(obj)\n    .reduce(\n      function(values, key) {\n        const fn = obj[key];\n        const result = next(fn, key);\n\n        // Omit `undefined` object entries.\n        if (result === undefined) return values;\n\n        // String format the value data.\n        const value = result.split(\"\\n\").join(`\\n${indent}`);\n\n        // Skip `key` prefix for function parser.\n        if (USED_METHOD_KEY.has(fn)) {\n          values.push(`${indent}${value}`);\n          return values;\n        }\n\n        values.push(`${indent}${quoteKey(key, next)}:${space}${value}`);\n        return values;\n      },\n      [] as string[]\n    )\n    .join(`,${eol}`);\n\n  // Avoid new lines in an empty object.\n  if (values === \"\") return \"{}\";\n\n  return `{${eol}${values}${eol}}`;\n};\n\n/**\n * Stringify global variable access.\n */\nconst globalToString: ToString = (value, space, next) => {\n  return `Function(${next(\"return this\")})()`;\n};\n\n/**\n * Convert JavaScript objects into strings.\n */\nconst OBJECT_TYPES: Record<string, ToString> = {\n  \"[object Array]\": arrayToString,\n  \"[object Object]\": rawObjectToString,\n  \"[object Error]\": (error: Error, space: string, next: Next) => {\n    return `new Error(${next(error.message)})`;\n  },\n  \"[object Date]\": (date: Date) => {\n    return `new Date(${date.getTime()})`;\n  },\n  \"[object String]\": (str: String, space: string, next: Next) => {\n    return `new String(${next(str.toString())})`;\n  },\n  \"[object Number]\": (num: number) => {\n    return `new Number(${num})`;\n  },\n  \"[object Boolean]\": (bool: boolean) => {\n    return `new Boolean(${bool})`;\n  },\n  \"[object Set]\": (set: Set<any>, space: string, next: Next) => {\n    return `new Set(${next(Array.from(set))})`;\n  },\n  \"[object Map]\": (map: Map<any, any>, space: string, next: Next) => {\n    return `new Map(${next(Array.from(map))})`;\n  },\n  \"[object RegExp]\": String,\n  \"[object global]\": globalToString,\n  \"[object Window]\": globalToString\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}