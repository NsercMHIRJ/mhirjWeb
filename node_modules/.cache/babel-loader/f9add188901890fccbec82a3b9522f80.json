{"ast":null,"code":"var _jsxFileName = \"/Users/kanu/Desktop/MHIRJTEST/mhirjWeb/src/Components/MdcMessages/Reports/Report.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport DailyReport from './DailyReport/DailyReport';\nimport FlagReport from './FlagReport/FlagReport';\nimport HistoryReport from './HistoryReport/HistoryReport';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    margin: '50px auto',\n    width: '95vw'\n  },\n  flagFilters: {\n    margin: '20px',\n    maxWidth: '100%',\n    display: 'flex'\n  },\n  flagH3: {\n    marginLeft: '24px'\n  },\n  button: {\n    margin: '9px 30px',\n    backgroundColor: \"#C5D3E0\",\n    width: '600px',\n    height: '51px'\n  },\n  buttonFlag: {\n    margin: '0px 50px 15px 0px',\n    backgroundColor: \"#C5D3E0\",\n    width: '89%'\n  }\n}));\n\nconst Report = props => {\n  _s();\n\n  const classes = useStyles();\n  const [report, setReport] = useState(props.reportConditions);\n  const [dailyReportData, setDailyReportData] = useState([]);\n  const [historyReportData, setHistoryReportData] = useState([]);\n  const [flagData, setFlagData] = useState([]);\n  const [flagList, setFlagList] = useState('');\n  const [flagConditions, setFlagConditions] = useState({});\n  const [loadingDaily, setLoadingDaily] = useState();\n  const [loadingHistory, setLoadingHistory] = useState();\n  const [loadingFlag, setLoadingFlag] = useState();\n  const [dailyValue, setDailyValue] = useState(0);\n  const [histValue, setHistValue] = useState(0);\n  const [flagValue, setFlagValue] = useState(0);\n\n  const HandleMultipleRowSelectReport = flagList => {\n    setFlagList(flagList);\n  };\n\n  useEffect(() => {\n    if (!Object.values(props.reportConditions).includes(\"\")) {\n      setReport(props.reportConditions);\n    }\n  }, [props.reportConditions]);\n  useEffect(() => {\n    if (!Object.values(report).includes(\"\")) {\n      let consecutiveDays = report.analysis === \"daily\" ? 0 : report.days;\n      const path = 'https://mhirjapi.azurewebsites.net/api/GenerateReport/' + report.analysis + '/' + report.occurences + '/' + report.legs + '/' + report.intermittent + '/' + consecutiveDays + '/' + report.ata + '/' + report.eqID + '/' + report.operator + '/' + report.messages + '/' + report.fromDate + '/' + report.toDate;\n      console.log(path, \"path no empty value\");\n\n      if (report.analysis === \"daily\") {\n        setDailyValue(1);\n        setDailyReportData([]);\n        setLoadingDaily(true);\n        axios.post(path).then(function (res) {\n          var data = JSON.parse(res.data);\n          setDailyReportData(data);\n          setLoadingDaily(false);\n        }).catch(function (err) {\n          console.log(err);\n          setLoadingDaily(false);\n        });\n      } else {\n        setHistValue(1);\n        setHistoryReportData([]);\n        setLoadingHistory(true);\n        axios.post(path).then(function (res) {\n          var data = JSON.parse(res.data);\n          setHistoryReportData(data);\n          setLoadingHistory(false);\n        }).catch(function (err) {\n          console.log(err);\n          setLoadingHistory(false);\n        });\n      }\n    }\n  }, [report]);\n\n  const handleGenerateFlagReport = event => {\n    setFlagConditions({ ...props.reportConditions,\n      flagList\n    });\n    setFlagData([]);\n    setLoadingFlag(true);\n    setFlagValue(1);\n  };\n\n  useEffect(() => {\n    if (!(Object.keys(flagConditions).length === 0 || Object.values(flagConditions).includes(\"\"))) {\n      const flagPath = 'https://mhirjapi.azurewebsites.net/api/GenerateReport/' + flagConditions.analysis + '/' + flagConditions.occurences + '/' + flagConditions.legs + '/' + flagConditions.intermittent + '/' + flagConditions.days + '/' + flagConditions.ata + '/' + flagConditions.eqID + '/' + flagConditions.operator + '/' + flagConditions.messages + '/' + flagConditions.fromDate + '/' + flagConditions.toDate + '/' + flagConditions.flagList;\n      console.log(flagPath);\n      axios.post(flagPath).then(function (res) {\n        var data = JSON.parse(res.data);\n        setFlagData(data);\n        setLoadingFlag(false);\n      }).catch(function (err) {\n        console.log(err);\n        setLoadingFlag(false);\n      });\n    }\n  }, [flagConditions]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [\" \", historyReportData !== \"\" && historyReportData !== \"undefined\" && histValue === 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 0,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 10,\n            children: \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 2,\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: () => handleGenerateFlagReport(),\n              className: classes.buttonFlag,\n              children: \"Generate Flag Report \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 13\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 46\n          }, this), \" \", /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: [/*#__PURE__*/_jsxDEV(HistoryReport, {\n              data: historyReportData,\n              title: \"History Report\",\n              reportConditions: report,\n              HandleMultipleRowSelectReport: HandleMultipleRowSelectReport,\n              loading: loadingHistory\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 13\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 20\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }, this), \" \"]\n    }, void 0, true), \" \", dailyReportData !== \"\" && dailyReportData !== \"undefined\" && dailyValue === 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(DailyReport, {\n        data: dailyReportData,\n        title: \"Daily Report\",\n        reportConditions: report,\n        loading: loadingDaily\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this), \" \"]\n    }, void 0, true), \" \", flagData !== \"\" && flagData !== \"undefined\" && flagValue === 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(FlagReport, {\n        data: flagData,\n        flagReportConditions: flagConditions,\n        title: \"Flag Report\",\n        loading: loadingFlag\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }, this), \" \"]\n    }, void 0, true), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 14\n  }, this);\n};\n\n_s(Report, \"woyHvDL71CMeF1IWloOyoX/0ET0=\", false, function () {\n  return [useStyles];\n});\n\n_c = Report;\nexport default Report;\n\nvar _c;\n\n$RefreshReg$(_c, \"Report\");","map":{"version":3,"sources":["/Users/kanu/Desktop/MHIRJTEST/mhirjWeb/src/Components/MdcMessages/Reports/Report.js"],"names":["React","useState","useEffect","DailyReport","FlagReport","HistoryReport","Grid","makeStyles","Button","axios","useStyles","theme","root","margin","width","flagFilters","maxWidth","display","flagH3","marginLeft","button","backgroundColor","height","buttonFlag","Report","props","classes","report","setReport","reportConditions","dailyReportData","setDailyReportData","historyReportData","setHistoryReportData","flagData","setFlagData","flagList","setFlagList","flagConditions","setFlagConditions","loadingDaily","setLoadingDaily","loadingHistory","setLoadingHistory","loadingFlag","setLoadingFlag","dailyValue","setDailyValue","histValue","setHistValue","flagValue","setFlagValue","HandleMultipleRowSelectReport","Object","values","includes","consecutiveDays","analysis","days","path","occurences","legs","intermittent","ata","eqID","operator","messages","fromDate","toDate","console","log","post","then","res","data","JSON","parse","catch","err","handleGenerateFlagReport","event","keys","length","flagPath"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport DailyReport from './DailyReport/DailyReport';\nimport FlagReport from './FlagReport/FlagReport';\nimport HistoryReport from './HistoryReport/HistoryReport';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: '50px auto',\n        width: '95vw',\n    },\n    flagFilters: {\n        margin: '20px',\n        maxWidth: '100%',\n        display: 'flex',\n    },\n    flagH3: {\n        marginLeft: '24px',\n    },\n    button: {\n        margin: '9px 30px',\n        backgroundColor: \"#C5D3E0\",\n        width: '600px',\n        height: '51px',\n    },\n    buttonFlag: {\n        margin: '0px 50px 15px 0px',\n        backgroundColor: \"#C5D3E0\",\n        width: '89%',\n    },\n}));\n\nconst Report = (props) => {\n    const classes = useStyles();\n    const [report, setReport] = useState(props.reportConditions);\n    const [dailyReportData, setDailyReportData] = useState([]);\n    const [historyReportData, setHistoryReportData] = useState([]);\n    const [flagData, setFlagData] = useState([]);\n    const [flagList, setFlagList] = useState('');\n    const [flagConditions, setFlagConditions] = useState({});\n    const [loadingDaily, setLoadingDaily] = useState();\n    const [loadingHistory, setLoadingHistory] = useState();\n    const [loadingFlag, setLoadingFlag] = useState();\n    const [dailyValue, setDailyValue] = useState(0);\n    const [histValue, setHistValue] = useState(0);\n    const [flagValue, setFlagValue] = useState(0);\n\n    const HandleMultipleRowSelectReport = (flagList) => {\n        setFlagList(flagList);\n    }\n\n    useEffect(() => {\n        if (!Object.values(props.reportConditions).includes(\"\")) {\n            setReport(props.reportConditions);\n        }\n    }, [props.reportConditions]);\n\n    useEffect(() => {\n        if (!Object.values(report).includes(\"\")) {\n            let consecutiveDays = report.analysis === \"daily\" ? 0 : report.days;\n            const path = 'https://mhirjapi.azurewebsites.net/api/GenerateReport/' + report.analysis + '/' + report.occurences + '/' + report.legs + '/' + report.intermittent + '/' +\n                consecutiveDays + '/' + report.ata + '/' + report.eqID + '/' + report.operator + '/' + report.messages + '/' + report.fromDate + '/' + report.toDate;\n            console.log(path, \"path no empty value\");\n\n            if (report.analysis === \"daily\") {\n                setDailyValue(1);\n                setDailyReportData([]);\n                setLoadingDaily(true);\n\n                axios.post(path).then(function(res) {\n                    var data = JSON.parse(res.data);\n                    setDailyReportData(data);\n                    setLoadingDaily(false);\n                }).catch(function(err) {\n                    console.log(err);\n                    setLoadingDaily(false);\n                });\n            } else {\n                setHistValue(1);\n                setHistoryReportData([]);\n                setLoadingHistory(true);\n\n                axios.post(path).then(function(res) {\n                    var data = JSON.parse(res.data);\n                    setHistoryReportData(data);\n                    setLoadingHistory(false);\n                }).catch(function(err) {\n                    console.log(err);\n                    setLoadingHistory(false);\n                });\n            }\n        }\n    }, [report]);\n\n    const handleGenerateFlagReport = (event) => {\n        setFlagConditions({\n            ...props.reportConditions,\n            flagList\n        });\n        setFlagData([]);\n        setLoadingFlag(true);\n        setFlagValue(1);\n    }\n\n    useEffect(() => {\n        if (!(Object.keys(flagConditions).length === 0 || Object.values(flagConditions).includes(\"\"))) {\n            const flagPath = 'https://mhirjapi.azurewebsites.net/api/GenerateReport/' + flagConditions.analysis + '/' + flagConditions.occurences + '/' +\n                flagConditions.legs + '/' + flagConditions.intermittent + '/' + flagConditions.days + '/' + flagConditions.ata + '/' +\n                flagConditions.eqID + '/' + flagConditions.operator + '/' + flagConditions.messages + '/' + flagConditions.fromDate + '/' +\n                flagConditions.toDate + '/' + flagConditions.flagList;\n            console.log(flagPath);\n\n            axios.post(flagPath).then(function(res) {\n                var data = JSON.parse(res.data);\n                setFlagData(data);\n                setLoadingFlag(false);\n            }).catch(function(err) {\n                console.log(err);\n                setLoadingFlag(false);\n            });\n        }\n    }, [flagConditions]);\n\n    return ( <\n        div className = { classes.root } > {\n            historyReportData !== \"\" && historyReportData !== \"undefined\" && histValue === 1 &&\n            <\n            >\n            <\n            div >\n            <\n            Grid container spacing = { 0 } >\n            <\n            Grid item xs = { 10 } > < /Grid> <\n            Grid item xs = { 2 } >\n            <\n            Button\n            variant = \"contained\"\n            onClick = {\n                () => handleGenerateFlagReport() }\n            className = { classes.buttonFlag } >\n            Generate Flag Report <\n            /Button> <\n            /Grid> <\n            Grid item xs = { 12 } >\n            <\n            HistoryReport data = { historyReportData }\n            title = \"History Report\"\n            reportConditions = { report }\n            HandleMultipleRowSelectReport = { HandleMultipleRowSelectReport }\n            loading = { loadingHistory }\n            /> <\n            /Grid> <\n            /Grid> <\n            /div> <\n            />\n        } {\n            dailyReportData !== \"\" && dailyReportData !== \"undefined\" && dailyValue === 1 &&\n                <\n                >\n                <\n                DailyReport data = { dailyReportData }\n            title = \"Daily Report\"\n            reportConditions = { report }\n            loading = { loadingDaily }\n            /> <\n            />\n        } {\n            flagData !== \"\" && flagData !== \"undefined\" && flagValue === 1 &&\n                <\n                >\n                <\n                FlagReport data = { flagData }\n            flagReportConditions = { flagConditions }\n            title = \"Flag Report\"\n            loading = { loadingFlag }\n            /> <\n            />\n        } <\n        /div>  \n    );\n};\n\nexport default Report;"]},"metadata":{},"sourceType":"module"}